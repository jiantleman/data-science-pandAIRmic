# Tech Report

### Covid Data<br>
We collected the COVID-19 data from [The Covid Tracking Project](https://covidtracking.com/), a reputable and reliable volunteer organization launched from The Atlantic that is dedicated to collecting and publishing the data required to understand the COVID-19 outbreak in the United States. <br>
Our COVID-19 sample on the increase in positive case(positiveIncrease) and daily increase in total test results(totalTestResultsIncrease) is comprehensively large, as it includes all 50 US states + Washington DC from Jan 2020 to Feb 2021. Given that The Covid Tracking Project cross-check and compile racial and ethnic demographic information via [The COVID Racial Data Tracker](https://covidtracking.com/race), and long-term-care facilities via the [Long-Term-Care tracker](https://covidtracking.com/nursing-homes-long-term-care-facilities), we are confident that our sample is representative in terms of the COVID-19 patients' demography. However there are some challenges associated with the data: <br>
- Ideally COVID-19 cases in the dataset should represent unique individuals, but depending on how states "deduplicate" data of individuals who received multiple tests, duplicates might be included; 
- Lacking federal data standards, states and territories have been reporting test results in different ways, using different units, and often with unclear definitions and documentation. Over time The Covid Project have developed data definitions that are comparable between states, but discrepancies may still exists. 

The purpose of the COVID-19 US State Policy Database for this project is provide policy contexts of each state that may affect individuals' mobility going in and out of states(quarantines, state of emergency etc.). It is also developed and maintained by a reliable source, the Boston University School of Public Health. Since information that we draw from this database is mainly factual dates, we do not think that bias is a concern. Although it can be argued that many, if not all, of the state policies collected in this database are likely to influence state Covid-19 impact, but we decided to select specific policies that relate to individuals’ capacities to travel in and out of their states and drop the other columns of the database to simplify our analysis and hopefully avoid overfitting. However we may reconsider the relevance of other state policies as our analysis progresses.

The foreseable challenge is minimizing residuals of our regression models. It is clear that many other variables(mask mandates, public health information etc.) that are correlated with our dependent variable(increase in positive case) are also possibly correlated with our independent variable(stronger institutional response of a place might make people more inclined to fly there). We also hope to develop a set of weights that can capture the different levels of covid-19 infection risk associated with passengers according to their origin state to increase the accuracy of our analysis. 

### Aviation Data<br>
The DB1B data is published quarterly and lists 10% of all booked flight itineraries; specifically, we collected information detailing each itinerary’s origin and destination airport, the calendar quarter, and the number of passengers. We also used T100 data, which details the number of passengers flying between two cities in any given month. The data was available for download as CSV files from the Bureau of Transportation Statistics website. The source for our flight data is reputable because it is provided and maintained by the Department of Transportation. The DB1B data is already a 10% representative sample of all flights, and the data was already compact enough for us to use directly without taking another further sample.<br>
An important consideration that we had to think about was that the data we collected was not perfect because in order to protect airlines’ competitiveness, the Department of Transportation does not release passenger flight data with particularly high accuracy and all the metrics that we want to use. The two databases we chose to use in the end each have their pros and cons: the T100 details monthly total passengers between any two non-stop destinations, but provides no information about multi-leg flights. This means that if a passenger flew from Providence to Orlando via Baltimore (PVD-BWI-MCO), we would only see the flights reflected as PVD-BWI and BWI-MCO. Hence, there will be no way for us to know that this particular passenger’s final destination was Orlando.<br>
On the other hand, DB1B provides itinerary-level data, allowing us to calculate the total number of passengers flying between two cities regardless of where they may have had a layover, but this data was reported quarterly, which does not provide the resolution that we want. There was also a third database that we were considering, the Airline On-Time Performance Data, which contains every single flight that flew in a certain month, but provided no passenger data. We chose not to use this database in the end, because there was no simple way to merge passenger data from another data source to this database. Thus in the end, we chose to join the DB1B and T100 data together to get monthly passenger data. The method that we used to do the joining is described in the next section.

Our aviation data is overall very clean. Airlines report this data to the Department of Transportation, which verifies its accuracy and publishes it in easily accessible .csv files. As explained in the previous section, we cleaned the T100 data to make a scaling model for the proportion of passengers flying into an airport during each month of a quarter (for example, of people flying into PVD during the first quarter of 2020, 40% may have flown in January, 40% may have flown in February, and 20% may have flown in March). Now that we had a table containing this monthly proportion for each airport and each quarter, we joined it with the cleaned DB1B data on quarter and destination airport. By multiplying this proportion by the total passengers per quarter, we were able to estimate the approximate number of passengers flying monthly between two states. We then grouped the data by state and summed the passengers, grouping by month, in order to find the total number of passengers flying between two states in any given month.
In total, we have 23535 data points which in total detail the number of passengers flying between two states in any given month during the first three quarters of 2020. We have approximately an equal number of data points for any group (pair of states), since each state pair has exactly nine months of data. This will certainly be enough data to perform our analysis on -- we have 23535 distinct month-to-from datapoints, which should be more than enough to test our hypothesis. There are technically some missing values, but these are from states without passengers flying between them -- for example, no one is flying between Rhode Island and Rhode Island! Similarly, there were not any duplicates, as the DB1B provides itinerary data, so by definition each row has a unique identifier and is a separate itinerary.

Our primary challenge was trying to obtain the data resolution we needed -- specifically, we wanted monthly point-to-point data, but the direct data would only give us point-to-point data OR monthly data. We think we came up with a pretty clever solution to deal with this problem in creating a scaling model and joining the two different tables together, and while it certainly introduces the assumption that an airport’s monthly flight distribution applies equally to every flight, this is probably fairly reasonable for two reasons: 1) airlines schedule flights for every quarter together, so each flight has similar distributions within a given quarter, and 2) when people stopped flying during COVID, people generally stopped flying everywhere and not specific patterns. Our next steps will be determining the best way to perform the analysis; we believe a multiple regression / hypothesis testing model is the way to go, and based on this state to state flight data for every month, we will pair it with the COVID data to compare infections in both states while controlling for COVID restrictions that may decrease local spread.
